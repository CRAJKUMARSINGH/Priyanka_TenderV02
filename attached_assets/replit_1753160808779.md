# Tender Processing System - Architecture Guide

## Overview

This is a comprehensive Streamlit-based tender processing system designed for government tender documentation and bidder management. The system handles the complete lifecycle of tender processing from data input through PDF generation with statutory compliance for government departments. The application processes tender data, manages bidders, and generates statutory-compliant documents using LaTeX templates.

## User Preferences

Preferred communication style: Simple, everyday language.

## System Architecture

### Frontend Architecture
- **Framework**: Streamlit web application with wide layout configuration
- **User Interface**: Form-based data entry with file upload capabilities for Excel and PDF files
- **Navigation**: Expandable sidebar for system navigation and credits display
- **State Management**: Streamlit session state for maintaining user data across interactions
- **Interactive Elements**: Balloons animation for welcome, progress indicators, and form validation

### Backend Architecture
- **Core Language**: Python 3.x with modular design pattern
- **Processing Pipeline**: Multi-stage data processing with validation at each step
- **Document Generation**: LaTeX-based PDF compilation system
- **Error Handling**: Comprehensive logging and exception management throughout all modules
- **Template System**: Dynamic LaTeX template processing with statutory compliance

### Data Storage Solutions
- **Primary Database**: SQLite with local file-based storage
- **Schema Design**: 
  - `works` table: Stores tender work information (NIT number, work name, costs, completion time)
  - `bidders` table: Stores bidder details linked to works (names, percentages, bid amounts, contact info)
- **File Storage**: Local filesystem organization with dedicated directories for templates, outputs, temporary files, and logs

## Key Components

### Core Processing Modules
1. **TenderProcessor**: Handles business logic for tender data processing, calculations, and bid amount computations
2. **DatabaseManager**: Manages SQLite database operations with full CRUD functionality and relationship management
3. **ValidationManager**: Comprehensive validation system ensuring statutory compliance and data integrity
4. **TemplateProcessor**: LaTeX template management with dynamic data substitution and statutory formatting

### Document Generation Pipeline
1. **LatexReportGenerator**: Creates LaTeX content from templates with statutory compliance formatting
2. **PDFGenerator**: Compiles LaTeX to PDF with robust error handling and LaTeX installation checking
3. **UserManualGenerator**: Creates comprehensive system documentation and help content

### Data Input Processors
1. **ExcelParser**: Multi-format Excel file parser supporting various tender data layouts and bidder information extraction
2. **PDFParser**: Text extraction from PDF documents using PyPDF2 and PyMuPDF with pattern matching for tender data

### Utility Modules
1. **DateUtils**: Date parsing and formatting with support for multiple Indian date formats and statutory date requirements
2. **Utils**: Validation helpers for percentages, currency formatting, and NIT number validation
3. **Validation**: Field-level and business rule validation with statutory compliance checks

## Data Flow

### Input Data Processing
1. **File Upload**: Users can upload Excel (.xlsx, .xls) or PDF files containing tender information
2. **Manual Entry**: Direct form input for tender details and bidder information
3. **Data Extraction**: Automated parsing and validation of uploaded files
4. **Data Standardization**: Type conversion and format standardization for consistent processing

### Processing Pipeline
1. **Validation**: Multi-level validation including required fields, data types, business rules, and statutory compliance
2. **Calculation**: Automatic bid amount calculation based on estimated costs and bidder percentages
3. **Storage**: Database storage with relationships between works and bidders
4. **Template Processing**: Dynamic LaTeX template generation with validated data

### Output Generation
1. **Document Types**: Comparative statements, letters of acceptance, scrutiny sheets, and work orders
2. **PDF Compilation**: LaTeX to PDF conversion with error handling and fallback mechanisms
3. **File Management**: Organized output storage with proper file naming and directory structure

## External Dependencies

### Required Python Packages
- **streamlit**: Web application framework for the user interface
- **pandas**: Data manipulation and analysis for Excel file processing
- **sqlite3**: Database connectivity and operations (built-in)
- **PyPDF2**: PDF text extraction and processing
- **PyMuPDF (fitz)**: Alternative PDF processing library
- **openpyxl**: Excel file reading and writing capabilities

### System Dependencies
- **LaTeX Distribution**: pdflatex for PDF compilation from LaTeX templates
- **File System**: Local storage for templates, outputs, temporary files, and database

### Optional Dependencies
- LaTeX packages for enhanced document formatting and Indian language support
- Additional PDF processing libraries for improved text extraction

## Deployment Strategy

### Local Development
- **Environment**: Standard Python environment with required packages
- **Database**: SQLite file-based database for simplicity
- **File Storage**: Local filesystem with organized directory structure
- **LaTeX**: Local LaTeX installation required for PDF generation

### Production Considerations
- **Scalability**: Current architecture supports single-user deployment
- **Data Persistence**: SQLite database and file storage require backup strategies
- **LaTeX Dependencies**: Production environment must have complete LaTeX installation
- **Error Handling**: Comprehensive logging system for troubleshooting and monitoring

### Directory Structure
- `templates/`: LaTeX templates for statutory documents
- `outputs/`: Generated PDF files and reports
- `temp/`: Temporary files during processing
- `logs/`: System logs and error tracking
- Database file: `tender_bidders.db` in root directory

### Security Considerations
- Local file-based system with no external network requirements
- Input validation prevents malicious file uploads
- Database queries use parameterized statements to prevent SQL injection
- File access limited to designated directories only